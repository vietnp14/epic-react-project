{"version":3,"sources":["store/actions/types.action.js","test/server/index.js","utils/api-client.js","app.js","utils/notification.js","store/reducers/authentication.reducer.js","store/reducers/book.reducer.js","store/reducers/list-item.reducer.js","store/reducers/index.js","store/configureStore.js","store/index.js","dev-tools/load.js","index.js","test/data/books.js","test/data/users.js","test/data/list-items.js","test/server/server-handlers.js","test/server/dev-server.js","store/actions/async.action.js","styles/colors.js","auth-provider.js","components/lib.js","store/actions/book.action.js","store/actions/list-item.action.js","store/actions/authentication.action.js","store/selectors/index.js","utils/hooks.js","components/profiler.js","styles/media-queries.js","assets/book-placeholder.svg"],"names":["ACTION_PREFIXES","LOGIN","REGISTER","LOGOUT","RESET_AUTH_ERROR","GET_BOOK","GET_BOOKS","UPDATE_BOOK","GET_LIST_ITEMS","ADD_LIST_ITEM","UPDATE_LIST_ITEM","REMOVE_LIST_ITEM","RESET_LIST_ITEM_ERROR","ACTION_TYPES","REQUEST","SUCCESS","FAILURE","AUTHENTICATION_ACTIONS","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILURE","BOOK_ACTIONS","GET_BOOK_REQUEST","GET_BOOK_SUCCESS","GET_BOOK_FAILURE","SET_CURRENT_BOOK","GET_BOOKS_REQUEST","GET_BOOKS_SUCCESS","GET_BOOKS_FAILURE","UPDATE_BOOK_REQUEST","UPDATE_BOOK_SUCCESS","UPDATE_BOOK_FAILURE","LIST_ITEMS_ACTIONS","GET_LIST_ITEMS_REQUEST","GET_LIST_ITEMS_SUCCESS","GET_LIST_ITEMS_FAILURE","ADD_LIST_ITEM_REQUEST","ADD_LIST_ITEM_SUCCESS","ADD_LIST_ITEM_FAILURE","UPDATE_LIST_ITEM_REQUEST","UPDATE_LIST_ITEM_SUCCESS","UPDATE_LIST_ITEM_FAILURE","REMOVE_LIST_ITEM_REQUEST","REMOVE_LIST_ITEM_SUCCESS","REMOVE_LIST_ITEM_FAILURE","module","exports","require","apiURL","process","axiosConfig","baseURL","axiosClient","axios","create","client","endpoint","a","data","token","customHeaders","headers","customConfig","config","method","body","JSON","stringify","undefined","Authorization","window","fetch","then","response","status","queryCache","clear","auth","location","assign","Promise","reject","message","json","ok","interceptors","request","use","statusText","error","AuthenticatedApp","React","lazy","UnauthenticatedApp","App","user","useAuthenticationState","Suspense","fallback","timeOut","notification","title","NotificationManager","success","initialState","isLoading","authenticationReducer","produce","state","action","type","username","payload","initialBooks","initialBook","isUpdating","booksReducer","books","currentBook","book","bookReducer","combineReducers","listItemReducer","listItems","push","listItem","isUpdate","map","li","id","filter","rootReducers","authentication","composeEnhancers","compose","store","createStore","applyMiddleware","loggerMiddleware","next","console","info","getState","asyncMiddleware","_","AppProviders","children","useAsync","run","useEffect","dispatch","loadBootstrapData","loadDevTools","callback","url","URL","setInUrl","searchParams","has","urlEnabled","get","go","localStorageValue","localStorage","getItem","Cypress","devTools","install","ReactDOM","render","phases","document","getElementById","booksData","read","bookId","find","readManyNotInList","ids","includes","query","search","matchSorter","keys","threshold","rankings","CONTAINS","key","usersKey","users","persist","setItem","load","Object","parse","validateUserForm","password","Error","authenticate","hash","passwordHash","sanitizeUser","btoa","validateUser","str","i","length","charCodeAt","String","__bookshelf","purgeUsers","forEach","sleep","listItemsKey","authorize","userId","listItemId","ownerId","required","rating","notes","startDate","Date","now","finishDate","booksDB","validateListItem","update","updates","remove","readByOwner","values","ls","defaultVal","val","lsVal","Number","isFinite","purgeListItems","CI","resolve","t","Math","random","setTimeout","apiUrl","authUrl","handlers","rest","post","req","res","ctx","usersDB","userFields","getUser","getToken","listItemsDB","lis","all","listItemsAndBooks","matchingBooks","getBooksNotInUsersList","allBooks","slice","params","put","updatedListItem","handler","originalResolver","resolver","shouldFail","result","toString","failureRate","requestMatchesFailConfig","configMatches","requestMethod","urlMatch","match","pathname","matches","some","removeItem","replace","atob","bookIdsInUsersList","fullUrl","homepage","server","setupWorker","start","quiet","serviceWorker","createRequestAction","prefix","createSuccessAction","createFailureAction","creatAsyncAction","args","base","text","gray","gray10","gray20","gray80","indigo","indigoDarken10","yellow","green","danger","orange","localStorageKey","handleUserResponse","login","register","logout","authURL","spin","keyframes","transform","CircleButton","borderRadius","padding","width","height","lineHeight","display","alignItems","justifyContent","background","colors","color","border","cursor","BookListUL","Spinner","FaSpinner","animation","defaultProps","buttonVariants","primary","secondary","Button","variant","inputStyles","Input","Textarea","Dialog","ReachDialog","maxWidth","paddingBottom","boxShadow","margin","mq","FormGroup","FullPageSpinner","css","fontSize","flexDirection","Link","RouterLink","textDecoration","errorMessageVariants","stacked","inline","ErrorMessage","props","role","whiteSpace","marginBottom","FullPageErrorFallback","getBooks","encodeURIComponent","getBook","getListItems","addListItem","updateListItem","removeListItem","authLogin","authRegister","loadingBook","author","coverImageUrl","bookPlaceholderSvg","publisher","synopsis","loadingBooks","Array","from","v","index","useBooksState","useSelector","useCurrentBook","useListItem","l","useListItemsState","defaultInitialState","initialStateRef","useRef","useReducer","s","current","safeSetState","useSafeDispatch","mounted","useLayoutEffect","useCallback","setData","setError","reset","promise","isIdle","isError","isSuccess","queue","Profiler","metadata","onRender","reportProfile","phase","actualDuration","baseDuration","startTime","commitTime","interactions","setInterval","sendProfileQueue","queueToSend","small"],"mappings":"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","file":"static/js/main.0e90db9d.chunk.js","sourcesContent":["const ACTION_PREFIXES = {\n  // Prefix for User's actions\n  LOGIN: 'Login',\n  REGISTER: 'Register',\n  LOGOUT: 'Logout',\n  RESET_AUTH_ERROR: 'Reset Auth Error',\n\n  // Prefix for Book's actions\n  GET_BOOK: 'Get Book',\n  GET_BOOKS: 'Get Books',\n  UPDATE_BOOK: 'Update Book',\n\n  // Prefix for List Items's actions\n  GET_LIST_ITEMS: 'Get List Items',\n\n  // Prefix for List Item's actions\n  ADD_LIST_ITEM: 'Add List Item',\n  UPDATE_LIST_ITEM: 'Update List Item',\n  REMOVE_LIST_ITEM: 'Remove List Item',\n  RESET_LIST_ITEM_ERROR: 'Reset List Item Error',\n};\n\nconst ACTION_TYPES = {\n  REQUEST: 'Request',\n  SUCCESS: 'Success',\n  FAILURE: 'Failure',\n};\n\nconst AUTHENTICATION_ACTIONS = {\n  // Login actions\n  LOGIN_REQUEST: 'Login Request',\n  LOGIN_SUCCESS: 'Login Success',\n  LOGIN_FAILURE: 'Login Failure',\n  RESET_AUTH_ERROR: 'Reset Auth Error',\n\n  // Register actions\n  REGISTER_REQUEST: 'Register Request',\n  REGISTER_SUCCESS: 'Register Success',\n  REGISTER_FAILURE: 'Register Failure',\n\n  // Log out actions\n  LOGOUT_REQUEST: 'Logout Request',\n  LOGOUT_SUCCESS: 'Logout Success',\n  LOGOUT_FAILURE: 'Logout Failure',\n};\n\nconst BOOK_ACTIONS = {\n  // Get a book\n  GET_BOOK_REQUEST: 'Get Book Request',\n  GET_BOOK_SUCCESS: 'Get Book Success',\n  GET_BOOK_FAILURE: 'Get Book Failure',\n\n  // Set current book\n  SET_CURRENT_BOOK: 'Set Current Book',\n\n  // Get books\n  GET_BOOKS_REQUEST: 'Get Books Request',\n  GET_BOOKS_SUCCESS: 'Get Books Success',\n  GET_BOOKS_FAILURE: 'Get Books Failure',\n\n  // Update a book\n  UPDATE_BOOK_REQUEST: 'Update Book Request',\n  UPDATE_BOOK_SUCCESS: 'Update Book Success',\n  UPDATE_BOOK_FAILURE: 'Update Book Failure',\n};\n\nconst LIST_ITEMS_ACTIONS = {\n  // Get list items\n  GET_LIST_ITEMS_REQUEST: 'Get List Items Request',\n  GET_LIST_ITEMS_SUCCESS: 'Get List Items Success',\n  GET_LIST_ITEMS_FAILURE: 'Get List Items Failure',\n\n  // Add list item\n  ADD_LIST_ITEM_REQUEST: 'Add List Item Request',\n  ADD_LIST_ITEM_SUCCESS: 'Add List Item Success',\n  ADD_LIST_ITEM_FAILURE: 'Add List Item Failure',\n\n  // Update list item\n  UPDATE_LIST_ITEM_REQUEST: 'Update List Item Request',\n  UPDATE_LIST_ITEM_SUCCESS: 'Update List Item Success',\n  UPDATE_LIST_ITEM_FAILURE: 'Update List Item Failure',\n\n  // Remove list item\n  REMOVE_LIST_ITEM_REQUEST: 'Remove List Item Request',\n  REMOVE_LIST_ITEM_SUCCESS: 'Remove List Item Success',\n  REMOVE_LIST_ITEM_FAILURE: 'Remove List Item Failure',\n\n  // Reset list item error\n  RESET_LIST_ITEM_ERROR: 'Reset List Item Error',\n};\n\nexport {\n  AUTHENTICATION_ACTIONS,\n  LIST_ITEMS_ACTIONS,\n  BOOK_ACTIONS,\n  ACTION_TYPES,\n  ACTION_PREFIXES,\n};\n","// dynamically export the server based on the environment\n// using CommonJS in this file because it's a bit simpler\n// even though mixing CJS and ESM is not typically recommended\n// It is possible to do this with ESM using `codegen.macro`\n// and you can take a look at an example of this here:\n// https://github.com/kentcdodds/bookshelf/blob/aef4f122428718ff422e203c6a68301dca50b396/src/test/server/index.js\n\nif (process.env.NODE_ENV === 'development') {\n  module.exports = require('./dev-server')\n} else if (process.env.NODE_ENV === 'test') {\n  module.exports = require('./test-server')\n} else {\n  // in normal apps you'll not do anything in this case\n  // but for this workshop app, we're actually going to\n  // deploy our mock service worker to production\n  // so normally, this condition would just look like this:\n\n  // module.exports = \"\"\n\n  // but for us, since we're shipping the dev server to prod\n  // we'll do the same thing we did for development:\n  module.exports = require('./dev-server')\n}\n","import {queryCache} from 'react-query'\nimport * as auth from 'auth-provider'\nimport axios from 'axios';\nconst apiURL = process.env.REACT_APP_API_URL;\n\nconst axiosConfig = {\n  baseURL: apiURL,\n};\n\nconst axiosClient = axios.create(axiosConfig);\n\naxiosClient.interceptors.request.use(\n  async (config) => {\n    const token = await auth.getToken();\n    const headers = {\n      Authorization: token ? `Bearer ${token}` : undefined,\n    };\n    return { ...config, headers: { ...config.headers, ...headers } };\n  },\n);\n\naxiosClient.interceptors.response.use(\n  async (response) => {\n    if (response.status === 401) {\n      queryCache.clear();\n      await auth.logout();\n      // refresh the page for them\n      window.location.assign(window.location);\n      return Promise.reject({ message: 'Please re-authenticate.' });\n    }\n\n    if (response && response.statusText === 'OK' && response.data) {\n      return response.data;\n    }\n\n    return response;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nasync function client(\n  endpoint,\n  {data, token, headers: customHeaders, ...customConfig} = {},\n) {\n  const config = {\n    method: data ? 'POST' : 'GET',\n    body: data ? JSON.stringify(data) : undefined,\n    headers: {\n      Authorization: token ? `Bearer ${token}` : undefined,\n      'Content-Type': data ? 'application/json' : undefined,\n      ...customHeaders,\n    },\n    ...customConfig,\n  }\n\n  return window.fetch(`${apiURL}/${endpoint}`, config).then(async response => {\n    if (response.status === 401) {\n      queryCache.clear()\n      await auth.logout()\n      // refresh the page for them\n      window.location.assign(window.location)\n      return Promise.reject({message: 'Please re-authenticate.'})\n    }\n\n    const data = await response.json()\n    if (response.ok) {\n      return data\n    } else {\n      return Promise.reject(data)\n    }\n  })\n}\n\nexport {client, axiosClient }\n","import React from 'react'\nimport {FullPageSpinner} from './components/lib'\nimport { useAuthenticationState } from 'store/selectors'\n\nconst AuthenticatedApp = React.lazy(() =>\n  import(/* webpackPrefetch: true */ './authenticated-app'),\n)\nconst UnauthenticatedApp = React.lazy(() => import('./unauthenticated-app'))\n\nfunction App() {\n  const { user } = useAuthenticationState();\n\n  return (\n    <React.Suspense fallback={<FullPageSpinner />}>\n      {user ? <AuthenticatedApp /> : <UnauthenticatedApp />}\n    </React.Suspense>\n  );\n}\n\nexport { App };\n","import { NotificationManager } from 'react-notifications';\n\nconst timeOut = 2500;\n\nconst notification = {\n  info: (title, message) => NotificationManager.info(message, title, timeOut),\n  success: (title, message) => NotificationManager.success(message, title, timeOut),\n  warning: (title, message) => NotificationManager.warning(message, title, timeOut),\n  error: (title, message) => NotificationManager.error(`${message}. Try again later.`, title, timeOut),\n};\n\nexport { notification };\n","import produce from 'immer';\nimport { AUTHENTICATION_ACTIONS } from \"store/actions\";\nimport { notification } from 'utils/notification';\n\nconst initialState = {\n  user: undefined,\n  token: undefined,\n  isLoading: false,\n};\n\nconst authenticationReducer = produce((state, action) => {\n  switch (action.type) {\n    case AUTHENTICATION_ACTIONS.LOGIN_REQUEST:\n    case AUTHENTICATION_ACTIONS.REGISTER_REQUEST:\n      state.isLoading = true;\n      break;\n\n    case AUTHENTICATION_ACTIONS.LOGIN_SUCCESS:\n      state.user = action.data.user ?? action.data;\n      state.isLoading = false;\n      notification.success(AUTHENTICATION_ACTIONS.LOGIN_SUCCESS, `Welcome ${state.user.username}. Have a nice day!`);\n      break;\n\n    case AUTHENTICATION_ACTIONS.REGISTER_SUCCESS:\n      state.user = action.data;\n      notification.success(AUTHENTICATION_ACTIONS.REGISTER_SUCCESS, `Welcome ${state.user.username}. Have a nice day!`);\n      state.isLoading = false;\n      break;\n\n    case AUTHENTICATION_ACTIONS.LOGIN_FAILURE:\n    case AUTHENTICATION_ACTIONS.REGISTER_FAILURE:\n      const { message } = action.payload;\n      notification.error('Authentication Failure', message);\n      state.isLoading = false;\n      break;\n\n    default:\n      break;\n  }\n}, initialState);\n\nexport default authenticationReducer;\n","import produce from 'immer';\nimport { combineReducers } from 'redux';\nimport { BOOK_ACTIONS } from 'store/actions';\nimport { notification } from 'utils/notification';\n\nconst initialBooks = {\n  data: undefined,\n  isLoading: false,\n};\n\nconst initialBook = {\n  data: undefined,\n  isLoading: false,\n  isUpdating: false,\n}\n\nconst booksReducer = produce((books, action) => {\n  switch (action.type) {\n    case BOOK_ACTIONS.GET_BOOKS_REQUEST:\n      books.isLoading = true;\n      books.data = null;\n      books.error = null;\n      break;\n\n    case BOOK_ACTIONS.GET_BOOKS_SUCCESS:\n      const { books: data } = action.data;\n      books.data = data;\n      books.isLoading = false;\n      break;\n\n    case BOOK_ACTIONS.GET_BOOKS_FAILURE:\n      const { message } = action.payload;\n      notification.error(BOOK_ACTIONS.GET_BOOKS_FAILURE, message);\n      books.isLoading = false;\n      break;\n\n    default:\n      break;\n  }\n}, initialBooks);\n\nconst currentBook = produce((book, action) => {\n  switch (action.type) {\n    case BOOK_ACTIONS.GET_BOOK_REQUEST:\n      book.data = null;\n      book.isLoading = true;\n      break;\n\n    case BOOK_ACTIONS.GET_BOOK_SUCCESS:\n      const { book: currentBook } = action.data;\n      book.data = currentBook;\n      book.isLoading = false;\n      break;\n\n    case BOOK_ACTIONS.GET_BOOK_FAILURE:\n      const { message } = action.payload;\n      notification.error(BOOK_ACTIONS.GET_BOOK_FAILURE, message);\n      book.isLoading = false;\n      break;\n\n    default:\n      break;\n  }\n}, initialBook);\n\nconst bookReducer = combineReducers({\n  book: currentBook,\n  books: booksReducer,\n});\n\nexport default bookReducer;\n","import produce from 'immer';\nimport { LIST_ITEMS_ACTIONS } from 'store/actions';\nimport { notification } from 'utils/notification';\n\nconst initialState = {\n  listItems: [],\n  isLoading: false,\n  isUpdating: false,\n};\n\nconst listItemReducer = produce((state, action) => {\n  switch(action.type) {\n    // Get list items\n    case LIST_ITEMS_ACTIONS.GET_LIST_ITEMS_REQUEST:\n      state.isLoading = true;\n      break;\n\n    case LIST_ITEMS_ACTIONS.GET_LIST_ITEMS_SUCCESS:\n      const { listItems } = action.data;\n      state.listItems = listItems;\n      state.isLoading = false;\n      break;\n\n    case LIST_ITEMS_ACTIONS.GET_LIST_ITEMS_FAILURE:\n      state.error = { message: action.payload.message };\n      state.isLoading = false;\n      break;\n\n    // Add list item\n    case LIST_ITEMS_ACTIONS.ADD_LIST_ITEM_REQUEST:\n      state.isUpdating = true;\n      break;\n\n    case LIST_ITEMS_ACTIONS.ADD_LIST_ITEM_SUCCESS:\n      state.isUpdating = false;\n      state.listItems.push(action.data.listItem);\n      break;\n\n    case LIST_ITEMS_ACTIONS.ADD_LIST_ITEM_FAILURE:\n      notification.error(LIST_ITEMS_ACTIONS.UPDATE_LIST_ITEM_FAILURE, action.payload.message);\n      state.isUpdate = false;\n      break;\n\n    // Update list item\n    case LIST_ITEMS_ACTIONS.UPDATE_LIST_ITEM_REQUEST:\n      state.isUpdating = true;\n      break;\n\n    case LIST_ITEMS_ACTIONS.UPDATE_LIST_ITEM_SUCCESS:\n      const { listItem } = action.data;\n      state.listItems = state.listItems.map((li) => {\n        if (listItem.id === li.id) {\n          return { ...li, ...listItem };\n        };\n\n        return li;\n      });\n      state.isUpdating = false;\n      break;\n\n    case LIST_ITEMS_ACTIONS.UPDATE_LIST_ITEM_FAILURE:\n      notification.error(LIST_ITEMS_ACTIONS.UPDATE_LIST_ITEM_FAILURE, action.payload.message);\n      state.isUpdating = false;\n      break;\n\n    // Remove list item\n    case LIST_ITEMS_ACTIONS.REMOVE_LIST_ITEM_REQUEST:\n      state.isUpdating = true;\n      break;\n\n    case LIST_ITEMS_ACTIONS.REMOVE_LIST_ITEM_SUCCESS:\n      const { id } = action.payload;\n      state.listItems = state.listItems.filter((li) => li.id !== id);\n      state.isUpdating = false;\n      break;\n\n    case LIST_ITEMS_ACTIONS.REMOVE_LIST_ITEM_FAILURE:\n      notification.error(LIST_ITEMS_ACTIONS.REMOVE_LIST_ITEM_FAILURE, action.payload.message);\n      state.isUpdating = false;\n      break;\n\n    default:\n      break;\n  }\n}, initialState);\n\nexport default listItemReducer;\n","import { combineReducers } from 'redux';\nimport authenticationReducer from './authentication.reducer';\nimport bookReducer from './book.reducer';\nimport listItemReducer from './list-item.reducer';\n\nconst rootReducers = combineReducers({\n  authentication: authenticationReducer,\n  book: bookReducer,\n  listItem: listItemReducer,\n});\n\nexport default rootReducers;\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport rootReducers from './reducers';\n\nconst composeEnhancers = (process.env.NODE_ENV === 'development' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\n\nconst loggerMiddleware = (store) => (next) => (action) => {\n  console.info('Prev store : ', store.getState());\n  console.info('Action : ', action);\n  console.info('Next middleware : ', next);\n  return next(action);\n};\n\nconst asyncMiddleware = (_) => (next) => (action) => {\n  if (typeof action === 'function') return action(next);\n  return next(action);\n};\n\nconst store = createStore(\n  rootReducers,\n  composeEnhancers(\n    applyMiddleware(\n      loggerMiddleware,\n      asyncMiddleware\n    )\n  )\n);\n\nexport default store;\n","import React, { useEffect } from 'react';\nimport store from './configureStore';\nimport { Provider } from 'react-redux';\nimport * as auth from 'auth-provider';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { useAsync } from 'utils/hooks';\nimport { FullPageSpinner } from 'components/lib';\nimport { loadBootstrapData } from './actions/async.action';\n\nconst AppProviders = ({ children }) => {\n  const { isLoading, run } = useAsync();\n\n  useEffect(() => {\n    (async () => {\n      const token = await auth.getToken();\n      if (token) {\n        run(store.dispatch(loadBootstrapData()));\n      }\n    })();\n  }, [run]);\n\n  if (isLoading) {\n    return (<FullPageSpinner />);\n  }\n\n  return (\n    <Router>\n      <Provider store={store}>\n        {children}\n      </Provider>\n    </Router>\n  );\n}\n\nexport default AppProviders;\n","function loadDevTools(callback) {\n  // check URL first\n  const url = new URL(window.location)\n  const setInUrl = url.searchParams.has('dev-tools')\n  const urlEnabled = url.searchParams.get('dev-tools') === 'true'\n  if (setInUrl) {\n    if (urlEnabled) {\n      return go()\n    } else {\n      return callback()\n    }\n  }\n\n  // the check localStorage\n  const localStorageValue = window.localStorage.getItem('dev-tools')\n  const setInLocalStorage = localStorageValue != undefined\n  const localStorageEnabled = localStorageValue === 'true'\n  if (setInLocalStorage) {\n    if (localStorageEnabled) {\n      return go()\n    } else {\n      return callback()\n    }\n  }\n\n  // the default is off in Cypress\n  if (window.Cypress) return callback()\n\n  // the default is on in development\n  if (process.env.NODE_ENV === 'development') return go()\n\n  return callback()\n\n  function go() {\n    // use a dynamic import so the dev-tools code isn't bundled with the regular\n    // app code so we don't worry about bundle size.\n    import('./dev-tools')\n      .then(devTools => devTools.install())\n      .finally(callback)\n  }\n}\n\nexport {loadDevTools}\n\n/*\neslint\n  eqeqeq: \"off\",\n*/\n","import {loadDevTools} from './dev-tools/load';\nimport './bootstrap';\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Profiler} from 'components/profiler';\nimport {App} from './app';\nimport { NotificationContainer } from 'react-notifications';\nimport AppProviders from 'store';\n\nloadDevTools(() => {\n  ReactDOM.render(\n    <Profiler id=\"App Root\" phases={['mount']}>\n      <AppProviders>\n        <App />\n      </AppProviders>\n      <NotificationContainer />\n    </Profiler>,\n    document.getElementById('root'),\n  )\n})\n","import booksData from './books-data.json'\nimport {matchSorter} from 'match-sorter'\n\nlet books = [...booksData]\n\nasync function create(book) {\n  books.push(book)\n  return book\n}\n\nasync function read(bookId) {\n  return books.find(book => book.id === bookId)\n}\n\nasync function readManyNotInList(ids) {\n  return books.filter(book => !ids.includes(book.id))\n}\n\nasync function query(search) {\n  return matchSorter(books, search, {\n    keys: [\n      'title',\n      'author',\n      'publisher',\n      {threshold: matchSorter.rankings.CONTAINS, key: 'synopsis'},\n    ],\n  })\n}\n\nasync function reset() {\n  books = [...booksData]\n}\n\nexport {create, query, read, readManyNotInList, reset}\n","const usersKey = '__bookshelf_users__'\nlet users = {}\nconst persist = () =>\n  window.localStorage.setItem(usersKey, JSON.stringify(users))\nconst load = () =>\n  Object.assign(users, JSON.parse(window.localStorage.getItem(usersKey)))\n\n// initialize\ntry {\n  load()\n} catch (error) {\n  persist()\n  // ignore json parse error\n}\n\nwindow.__bookshelf = window.__bookshelf || {}\nwindow.__bookshelf.purgeUsers = () => {\n  Object.keys(users).forEach(key => {\n    delete users[key]\n  })\n  persist()\n}\n\nfunction validateUserForm({username, password}) {\n  if (!username) {\n    const error = new Error('A username is required')\n    error.status = 400\n    throw error\n  }\n  if (!password) {\n    const error = new Error('A password is required')\n    error.status = 400\n    throw error\n  }\n}\n\nasync function authenticate({username, password}) {\n  validateUserForm({username, password})\n  const id = hash(username)\n  const user = users[id] || {}\n  if (user.passwordHash === hash(password)) {\n    return {...sanitizeUser(user), token: btoa(user.id)}\n  }\n  const error = new Error('Invalid username or password')\n  error.status = 400\n  throw error\n}\n\nasync function create({username, password}) {\n  validateUserForm({username, password})\n  const id = hash(username)\n  const passwordHash = hash(password)\n  if (users[id]) {\n    const error = new Error(\n      `Cannot create a new user with the username \"${username}\"`,\n    )\n    error.status = 400\n    throw error\n  }\n  users[id] = {id, username, passwordHash}\n  persist()\n  return read(id)\n}\n\nasync function read(id) {\n  validateUser(id)\n  return sanitizeUser(users[id])\n}\n\nfunction sanitizeUser(user) {\n  const {passwordHash, ...rest} = user\n  return rest\n}\n\nasync function update(id, updates) {\n  validateUser(id)\n  Object.assign(users[id], updates)\n  persist()\n  return read(id)\n}\n\n// this would be called `delete` except that's a reserved word in JS :-(\nasync function remove(id) {\n  validateUser(id)\n  delete users[id]\n  persist()\n}\n\nfunction validateUser(id) {\n  load()\n  if (!users[id]) {\n    const error = new Error(`No user with the id \"${id}\"`)\n    error.status = 404\n    throw error\n  }\n}\n\nfunction hash(str) {\n  var hash = 5381,\n    i = str.length\n\n  while (i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i)\n  }\n  return String(hash >>> 0)\n}\n\nasync function reset() {\n  users = {}\n  persist()\n}\n\nexport {authenticate, create, read, update, remove, reset}\n","import * as booksDB from './books'\nconst listItemsKey = '__bookshelf_list_items__'\nlet listItems = {}\nconst persist = () =>\n  window.localStorage.setItem(listItemsKey, JSON.stringify(listItems))\nconst load = () =>\n  Object.assign(\n    listItems,\n    JSON.parse(window.localStorage.getItem(listItemsKey)),\n  )\n\n// initialize\ntry {\n  load()\n} catch (error) {\n  persist()\n  // ignore json parse error\n}\n\nwindow.__bookshelf = window.__bookshelf || {}\nwindow.__bookshelf.purgeListItems = () => {\n  Object.keys(listItems).forEach(key => {\n    delete listItems[key]\n  })\n  persist()\n}\n\nasync function authorize(userId, listItemId) {\n  const listItem = await read(listItemId)\n  if (listItem.ownerId !== userId) {\n    const error = new Error('User is not authorized to view that list')\n    error.status = 403\n    throw error\n  }\n}\n\nasync function create({\n  bookId = required('bookId'),\n  ownerId = required('ownerId'),\n  rating = -1,\n  notes = '',\n  startDate = Date.now(),\n  finishDate = null,\n}) {\n  const id = hash(`${bookId}${ownerId}`)\n  if (listItems[id]) {\n    const error = new Error(\n      `This user cannot create new list item for that book`,\n    )\n    error.status = 400\n    throw error\n  }\n  const book = await booksDB.read(bookId)\n  if (!book) {\n    const error = new Error(`No book found with the ID of ${bookId}`)\n    error.status = 400\n    throw error\n  }\n  listItems[id] = {id, bookId, ownerId, rating, notes, finishDate, startDate}\n  persist()\n  return read(id)\n}\n\nasync function read(id) {\n  validateListItem(id)\n  return listItems[id]\n}\n\nasync function update(id, updates) {\n  validateListItem(id)\n  Object.assign(listItems[id], updates)\n  persist()\n  return read(id)\n}\n\n// this would be called `delete` except that's a reserved word in JS :-(\nasync function remove(id) {\n  validateListItem(id)\n  delete listItems[id]\n  persist()\n}\n\nasync function readMany(userId, listItemIds) {\n  return Promise.all(\n    listItemIds.map(id => {\n      authorize(userId, id)\n      return read(id)\n    }),\n  )\n}\n\nasync function readByOwner(userId) {\n  return Object.values(listItems).filter(li => li.ownerId === userId)\n}\n\nfunction validateListItem(id) {\n  load()\n  if (!listItems[id]) {\n    const error = new Error(`No list item with the id \"${id}\"`)\n    error.status = 404\n    throw error\n  }\n}\n\nfunction hash(str) {\n  var hash = 5381,\n    i = str.length\n\n  while (i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i)\n  }\n  return String(hash >>> 0)\n}\n\nfunction required(key) {\n  const error = new Error(`${key} is required`)\n  error.status = 400\n  throw error\n}\n\nasync function reset() {\n  listItems = {}\n  persist()\n}\n\nexport {authorize, create, read, update, remove, readMany, readByOwner, reset}\n","import {rest} from 'msw'\nimport {match} from 'node-match-path'\nimport * as booksDB from 'test/data/books'\nimport * as usersDB from 'test/data/users'\nimport * as listItemsDB from 'test/data/list-items'\n\nlet sleep\nif (process.env.CI) {\n  sleep = () => Promise.resolve()\n} else if (process.env.NODE_ENV === 'test') {\n  sleep = () => Promise.resolve()\n} else {\n  sleep = (\n    t = Math.random() * ls('__bookshelf_variable_request_time__', 400) +\n      ls('__bookshelf_min_request_time__', 400),\n  ) => new Promise(resolve => setTimeout(resolve, t))\n}\n\nfunction ls(key, defaultVal) {\n  const lsVal = window.localStorage.getItem(key)\n  let val\n  if (lsVal) {\n    val = Number(lsVal)\n  }\n  return Number.isFinite(val) ? val : defaultVal\n}\n\nconst apiUrl = process.env.REACT_APP_API_URL\nconst authUrl = process.env.REACT_APP_AUTH_URL\n\nconst handlers = [\n  rest.post(`${authUrl}/login`, async (req, res, ctx) => {\n    const {username, password} = req.body\n    const user = await usersDB.authenticate({username, password})\n    return res(ctx.json({user}))\n  }),\n\n  rest.post(`${authUrl}/register`, async (req, res, ctx) => {\n    const {username, password} = req.body\n    const userFields = {username, password}\n    await usersDB.create(userFields)\n    let user\n    try {\n      user = await usersDB.authenticate(userFields)\n    } catch (error) {\n      return res(\n        ctx.status(400),\n        ctx.json({status: 400, message: error.message}),\n      )\n    }\n    return res(ctx.json({user}))\n  }),\n\n  rest.get(`${apiUrl}/me`, async (req, res, ctx) => {\n    const user = await getUser(req)\n    const token = getToken(req)\n    return res(ctx.json({user: {...user, token}}))\n  }),\n\n  rest.get(`${apiUrl}/bootstrap`, async (req, res, ctx) => {\n    const user = await getUser(req)\n    const token = getToken(req)\n    const lis = await listItemsDB.readByOwner(user.id)\n    const listItemsAndBooks = await Promise.all(\n      lis.map(async listItem => ({\n        ...listItem,\n        book: await booksDB.read(listItem.bookId),\n      })),\n    )\n    return res(ctx.json({user: {...user, token}, listItems: listItemsAndBooks}))\n  }),\n\n  rest.get(`${apiUrl}/books`, async (req, res, ctx) => {\n    if (!req.url.searchParams.has('query')) {\n      return ctx.fetch(req)\n    }\n    const query = req.url.searchParams.get('query')\n\n    let matchingBooks = []\n    if (query) {\n      matchingBooks = await booksDB.query(query)\n    } else {\n      if (getToken(req)) {\n        const user = await getUser(req)\n        const allBooks = await getBooksNotInUsersList(user.id)\n        // return a random assortment of 10 books not already in the user's list\n        matchingBooks = allBooks.slice(0, 10)\n      } else {\n        const allBooks = await booksDB.readManyNotInList([])\n        matchingBooks = allBooks.slice(0, 10)\n      }\n    }\n\n    return res(ctx.json({books: matchingBooks}))\n  }),\n\n  rest.get(`${apiUrl}/books/:bookId`, async (req, res, ctx) => {\n    const {bookId} = req.params\n    const book = await booksDB.read(bookId)\n    if (!book) {\n      return res(\n        ctx.status(404),\n        ctx.json({status: 404, message: 'Book not found'}),\n      )\n    }\n    return res(ctx.json({book}))\n  }),\n\n  rest.get(`${apiUrl}/list-items`, async (req, res, ctx) => {\n    const user = await getUser(req)\n    const lis = await listItemsDB.readByOwner(user.id)\n    const listItemsAndBooks = await Promise.all(\n      lis.map(async listItem => ({\n        ...listItem,\n        book: await booksDB.read(listItem.bookId),\n      })),\n    )\n    return res(ctx.json({listItems: listItemsAndBooks}))\n  }),\n\n  rest.post(`${apiUrl}/list-items`, async (req, res, ctx) => {\n    const user = await getUser(req)\n    const {bookId} = req.body\n    const listItem = await listItemsDB.create({\n      ownerId: user.id,\n      bookId: bookId,\n    })\n    const book = await booksDB.read(bookId)\n    return res(ctx.json({listItem: {...listItem, book}}))\n  }),\n\n  rest.put(`${apiUrl}/list-items/:listItemId`, async (req, res, ctx) => {\n    const user = await getUser(req)\n    const {listItemId} = req.params\n    const updates = req.body\n    await listItemsDB.authorize(user.id, listItemId)\n    const updatedListItem = await listItemsDB.update(listItemId, updates)\n    const book = await booksDB.read(updatedListItem.bookId)\n    return res(ctx.json({listItem: {...updatedListItem, book}}))\n  }),\n\n  rest.delete(`${apiUrl}/list-items/:listItemId`, async (req, res, ctx) => {\n    const user = await getUser(req)\n    const {listItemId} = req.params\n    await listItemsDB.authorize(user.id, listItemId)\n    await listItemsDB.remove(listItemId)\n    return res(ctx.json({success: true}))\n  }),\n\n  rest.post(`${apiUrl}/profile`, async (req, res, ctx) => {\n    // here's where we'd actually send the report to some real data store.\n    return res(ctx.json({success: true}))\n  }),\n].map(handler => {\n  const originalResolver = handler.resolver\n  handler.resolver = async function resolver(req, res, ctx) {\n    try {\n      if (shouldFail(req)) {\n        throw new Error('Request failure (for testing purposes).')\n      }\n      const result = await originalResolver(req, res, ctx)\n      return result\n    } catch (error) {\n      const status = error.status || 500\n      return res(\n        ctx.status(status),\n        ctx.json({status, message: error.message || 'Unknown Error'}),\n      )\n    } finally {\n      await sleep()\n    }\n  }\n  return handler\n})\n\nfunction shouldFail(req) {\n  if (JSON.stringify(req.body)?.includes('FAIL')) return true\n  if (req.url.searchParams.toString()?.includes('FAIL')) return true\n  if (process.env.NODE_ENV === 'test') return false\n  const failureRate = Number(\n    window.localStorage.getItem('__bookshelf_failure_rate__') || 0,\n  )\n  if (Math.random() < failureRate) return true\n  if (requestMatchesFailConfig(req)) return true\n\n  return false\n}\n\nfunction requestMatchesFailConfig(req) {\n  function configMatches({requestMethod, urlMatch}) {\n    return (\n      (requestMethod === 'ALL' || req.method === requestMethod) &&\n      match(urlMatch, req.url.pathname).matches\n    )\n  }\n  try {\n    const failConfig = JSON.parse(\n      window.localStorage.getItem('__bookshelf_request_fail_config__') || '[]',\n    )\n    if (failConfig.some(configMatches)) return true\n  } catch (error) {\n    window.localStorage.removeItem('__bookshelf_request_fail_config__')\n  }\n  return false\n}\n\nconst getToken = req => req.headers.get('Authorization')?.replace('Bearer ', '')\n\nasync function getUser(req) {\n  const token = getToken(req)\n  if (!token) {\n    const error = new Error('A token must be provided')\n    error.status = 401\n    throw error\n  }\n  let userId\n  try {\n    userId = atob(token)\n  } catch (e) {\n    const error = new Error('Invalid token. Please login again.')\n    error.status = 401\n    throw error\n  }\n  const user = await usersDB.read(userId)\n  return user\n}\n\nasync function getBooksNotInUsersList(userId) {\n  const bookIdsInUsersList = (await listItemsDB.readByOwner(userId)).map(\n    li => li.bookId,\n  )\n  const books = await booksDB.readManyNotInList(bookIdsInUsersList)\n  return books\n}\n\nexport {handlers}\n","import {setupWorker} from 'msw'\nimport {handlers} from './server-handlers'\nimport {homepage} from '../../../package.json'\n\nconst fullUrl = new URL(homepage)\n\nconst server = setupWorker(...handlers)\n\nserver.start({\n  quiet: true,\n  serviceWorker: {\n    url: fullUrl.pathname + 'mockServiceWorker.js',\n  },\n})\n\nexport * from 'msw'\nexport {server}\n","import { axiosClient } from \"utils/api-client\";\nimport { ACTION_PREFIXES } from \".\";\nimport { ACTION_TYPES } from \"./types.action\";\n\nconst createRequestAction = (prefix, payload) => ({\n  type: `${prefix} ${ACTION_TYPES.REQUEST}`,\n  payload,\n});\n\nconst createSuccessAction = (prefix, payload, data) => ({\n  type: `${prefix} ${ACTION_TYPES.SUCCESS}`,\n  payload,\n  data,\n});\n\nconst createFailureAction = (prefix, { message }) => ({\n  type: `${prefix} ${ACTION_TYPES.FAILURE}`,\n  payload: {\n    message,\n  },\n});\n\nconst creatAsyncAction = (prefix, payload, request, ...args) => async (dispatch) => {\n  dispatch(createRequestAction(prefix, payload));\n\n  try {\n    const result = await request(...args);\n    return dispatch(createSuccessAction(prefix, payload, result));\n  } catch (err) {\n    dispatch(createFailureAction(prefix, err))\n    throw err;\n  }\n};\n\nconst loadBootstrapData = () => async (dispatch) => {\n  try {\n    const { user, listItems } = await axiosClient('/bootstrap');\n    dispatch(createSuccessAction(ACTION_PREFIXES.LOGIN, {}, user));\n    dispatch(createSuccessAction(ACTION_PREFIXES.GET_LIST_ITEMS, {}, { listItems }));\n  } catch (err) {\n    throw err;\n  }\n}\n\nexport { loadBootstrapData };\nexport default creatAsyncAction;\n","export const base = 'white'\nexport const text = '#434449'\nexport const gray = '#f1f2f7'\nexport const gray10 = '#f1f1f4'\nexport const gray20 = '#e4e5e9'\nexport const gray80 = '#6f7077'\nexport const indigo = '#3f51b5'\nexport const indigoDarken10 = '#364495'\nexport const indigoLighten80 = '#b7c1f8'\nexport const yellow = '#ffc107'\nexport const green = '#4caf50'\nexport const danger = '#ef5350'\nexport const orange = 'orange'\n","// pretend this is firebase, netlify, or auth0's code.\n// you shouldn't have to implement something like this in your own app\n\nconst localStorageKey = '__auth_provider_token__'\n\nasync function getToken() {\n  // if we were a real auth provider, this is where we would make a request\n  // to retrieve the user's token. (It's a bit more complicated than that...\n  // but you're probably not an auth provider so you don't need to worry about it).\n  return window.localStorage.getItem(localStorageKey)\n}\n\nfunction handleUserResponse({user}) {\n  window.localStorage.setItem(localStorageKey, user.token)\n  return user\n}\n\nfunction login({username, password}) {\n  return client('login', {username, password}).then(handleUserResponse)\n}\n\nfunction register({username, password}) {\n  return client('register', {username, password}).then(handleUserResponse)\n}\n\nasync function logout() {\n  window.localStorage.removeItem(localStorageKey)\n  // refresh the page for them\n  window.location.assign(window.location)\n}\n\n// an auth provider wouldn't use your client, they'd have their own\n// so that's why we're not just re-using the client\nconst authURL = process.env.REACT_APP_AUTH_URL\n\nasync function client(endpoint, data) {\n  const config = {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {'Content-Type': 'application/json'},\n  }\n\n  return window.fetch(`${authURL}/${endpoint}`, config).then(async response => {\n    const data = await response.json()\n    if (response.ok) {\n      return data\n    } else {\n      return Promise.reject(data)\n    }\n  })\n}\n\nexport {getToken, login, register, logout, localStorageKey}\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport {Link as RouterLink} from 'react-router-dom'\nimport styled from '@emotion/styled/macro'\nimport {keyframes} from '@emotion/core'\nimport * as colors from 'styles/colors'\nimport * as mq from 'styles/media-queries'\nimport {Dialog as ReachDialog} from '@reach/dialog'\nimport {FaSpinner} from 'react-icons/fa'\n\nconst spin = keyframes({\n  '0%': {transform: 'rotate(0deg)'},\n  '100%': {transform: 'rotate(360deg)'},\n})\n\nconst CircleButton = styled.button({\n  borderRadius: '30px',\n  padding: '0',\n  width: '40px',\n  height: '40px',\n  lineHeight: '1',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  background: colors.base,\n  color: colors.text,\n  border: `1px solid ${colors.gray10}`,\n  cursor: 'pointer',\n})\n\nconst BookListUL = styled.ul({\n  listStyle: 'none',\n  padding: '0',\n  display: 'grid',\n  gridTemplateRows: 'repeat(auto-fill, minmax(100px, 1fr))',\n  gridGap: '1em',\n})\n\nconst Spinner = styled(FaSpinner)({\n  animation: `${spin} 1s linear infinite`,\n})\nSpinner.defaultProps = {\n  'aria-label': 'loading',\n}\n\nconst buttonVariants = {\n  primary: {\n    background: colors.indigo,\n    color: colors.base,\n  },\n  secondary: {\n    background: colors.gray,\n    color: colors.text,\n  },\n}\nconst Button = styled.button(\n  {\n    padding: '10px 15px',\n    border: '0',\n    lineHeight: '1',\n    borderRadius: '3px',\n  },\n  ({variant = 'primary'}) => buttonVariants[variant],\n)\n\nconst inputStyles = {\n  border: '1px solid #f1f1f4',\n  background: '#f1f2f7',\n  padding: '8px 12px',\n}\n\nconst Input = styled.input({borderRadius: '3px'}, inputStyles)\nconst Textarea = styled.textarea(inputStyles)\n\nconst Dialog = styled(ReachDialog)({\n  maxWidth: '450px',\n  borderRadius: '3px',\n  paddingBottom: '3.5em',\n  boxShadow: '0 10px 30px -5px rgba(0, 0, 0, 0.2)',\n  margin: '20vh auto',\n  [mq.small]: {\n    width: '100%',\n    margin: '10vh auto',\n  },\n})\n\nconst FormGroup = styled.div({\n  display: 'flex',\n  flexDirection: 'column',\n})\n\nfunction FullPageSpinner() {\n  return (\n    <div\n      css={{\n        fontSize: '4em',\n        height: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <Spinner />\n    </div>\n  )\n}\n\nconst Link = styled(RouterLink)({\n  color: colors.indigo,\n  ':hover': {\n    color: colors.indigoDarken10,\n    textDecoration: 'underline',\n  },\n})\n\nconst errorMessageVariants = {\n  stacked: {display: 'block'},\n  inline: {display: 'inline-block'},\n}\n\nfunction ErrorMessage({error, variant = 'stacked', ...props}) {\n  return (\n    <div\n      role=\"alert\"\n      css={[{color: colors.danger}, errorMessageVariants[variant]]}\n      {...props}\n    >\n      <span>There was an error: </span>\n      <pre\n        css={[\n          {whiteSpace: 'break-spaces', margin: '0', marginBottom: -5},\n          errorMessageVariants[variant],\n        ]}\n      >\n        {error.message}\n      </pre>\n    </div>\n  )\n}\n\nfunction FullPageErrorFallback({error}) {\n  return (\n    <div\n      role=\"alert\"\n      css={{\n        color: colors.danger,\n        height: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <p>Uh oh... There's a problem. Try refreshing the app.</p>\n      <pre>{error.message}</pre>\n    </div>\n  )\n}\n\nexport {\n  FullPageErrorFallback,\n  ErrorMessage,\n  CircleButton,\n  BookListUL,\n  Spinner,\n  Button,\n  Input,\n  Textarea,\n  Dialog,\n  FormGroup,\n  FullPageSpinner,\n  Link,\n}\n","import creatAsyncAction from './async.action';\nimport { axiosClient } from 'utils/api-client';\nimport { ACTION_PREFIXES } from './types.action';\n\nconst getBooks = (query = '') =>\n  creatAsyncAction(ACTION_PREFIXES.GET_BOOKS, {}, axiosClient.get, `books?query=${encodeURIComponent(query)}`);\n\nconst getBook = (bookId) => \n  creatAsyncAction(ACTION_PREFIXES.GET_BOOK, { bookId }, axiosClient.get, `books/${bookId}`);\n\nexport {\n  getBook,\n  getBooks,\n};\n","import creatAsyncAction from './async.action';\nimport { axiosClient } from 'utils/api-client';\nimport { ACTION_PREFIXES } from './types.action';\n\nconst resetListItemError = () => ({\n  type: ACTION_PREFIXES.RESET_LIST_ITEM_ERROR,\n});\n\nconst getListItems = () =>\n  creatAsyncAction(ACTION_PREFIXES.GET_LIST_ITEMS, {}, axiosClient.get, 'list-items');\n\nconst addListItem = (bookId) =>\n  creatAsyncAction(ACTION_PREFIXES.ADD_LIST_ITEM, { bookId }, axiosClient.post, 'list-items', { bookId });\n\nconst updateListItem = (updates) =>\n  creatAsyncAction(ACTION_PREFIXES.UPDATE_LIST_ITEM, updates, axiosClient.put, `list-items/${updates.id}`, updates);\n\nconst removeListItem = ({ id }) =>\n  creatAsyncAction(ACTION_PREFIXES.REMOVE_LIST_ITEM, { id }, axiosClient.delete, `list-items/${id}`);\n\nexport {\n  getListItems,\n  addListItem,\n  updateListItem,\n  removeListItem,\n  resetListItemError,\n};\n","import { login as authLogin, register as authRegister } from 'auth-provider';\nimport { client } from 'utils/api-client';\nimport creatAsyncAction from './async.action';\nimport { ACTION_PREFIXES } from './types.action';\n\nconst resetAuthError = () => ({\n  type: ACTION_PREFIXES.RESET_AUTH_ERROR,\n});\n\nconst loginByToken = (token) =>\n  creatAsyncAction(ACTION_PREFIXES.LOGIN, {}, client, 'me', { token });\n\nconst login = ({ username, password }) => \n  creatAsyncAction(ACTION_PREFIXES.LOGIN, { username, password }, authLogin, { username, password });\n\nconst register = ({ username, password }) =>\n  creatAsyncAction(ACTION_PREFIXES.REGISTER, { username, password }, authRegister, { username, password });\n\nconst logout = () => {}\n\nexport {\n  login,\n  logout,\n  register,\n  loginByToken,\n  resetAuthError,\n};\n","import { useSelector } from 'react-redux';\nimport bookPlaceholderSvg from 'assets/book-placeholder.svg'\n\nconst loadingBook = {\n  title: 'Loading...',\n  author: 'loading...',\n  coverImageUrl: bookPlaceholderSvg,\n  publisher: 'Loading Publishing',\n  synopsis: 'Loading...',\n  loadingBook: true,\n};\n\nconst loadingBooks = Array.from({length: 10}, (v, index) => ({\n  id: `loading-book-${index}`,\n  ...loadingBook,\n}));\n\nconst useBooksState = () => useSelector((state) =>\n  ({ ...state.book.books, ...(!state.book.books.data && { data: loadingBooks }) })\n);\n\nconst useBook = (bookId) => useSelector((state) =>\n  state.book.books.data?.find((b) => b.id === bookId) || loadingBook\n);\n\nconst useCurrentBook = () => useSelector((state) =>\n  ({ ...state.book.book, ...(!state.book.book.data && { data: loadingBook }) })\n);\n\nconst useListItem = (bookId) =>\n  useSelector((state) => state.listItem.listItems.find((l) => l.bookId === bookId));\n\nconst useListItemsState = () => useSelector((state) => state.listItem);\n\nconst useAuthenticationState = () => useSelector((state) => state.authentication);\n\nexport {\n  useBook,\n  useCurrentBook,\n  useListItem,\n  useBooksState,\n  useListItemsState,\n  useAuthenticationState,\n};\n","import React from 'react'\n\nfunction useSafeDispatch(dispatch) {\n  const mounted = React.useRef(false)\n  React.useLayoutEffect(() => {\n    mounted.current = true\n    return () => (mounted.current = false)\n  }, [])\n  return React.useCallback(\n    (...args) => (mounted.current ? dispatch(...args) : void 0),\n    [dispatch],\n  )\n}\n\n// Example usage:\n// const {data, error, status, run} = useAsync()\n// React.useEffect(() => {\n//   run(fetchPokemon(pokemonName))\n// }, [pokemonName, run])\nconst defaultInitialState = {status: 'idle', data: null, error: null}\nfunction useAsync(initialState) {\n  const initialStateRef = React.useRef({\n    ...defaultInitialState,\n    ...initialState,\n  })\n  const [{status, data, error}, setState] = React.useReducer(\n    (s, a) => ({...s, ...a}),\n    initialStateRef.current,\n  )\n\n  const safeSetState = useSafeDispatch(setState)\n\n  const setData = React.useCallback(\n    data => safeSetState({data, status: 'resolved'}),\n    [safeSetState],\n  )\n  const setError = React.useCallback(\n    error => safeSetState({error, status: 'rejected'}),\n    [safeSetState],\n  )\n  const reset = React.useCallback(\n    () => safeSetState(initialStateRef.current),\n    [safeSetState],\n  )\n\n  const run = React.useCallback(\n    promise => {\n      if (!promise || !promise.then) {\n        throw new Error(\n          `The argument passed to useAsync().run must be a promise. Maybe a function that's passed isn't returning anything?`,\n        )\n      }\n      safeSetState({status: 'pending'})\n      return promise.then(\n        data => {\n          setData(data)\n          return data\n        },\n        error => {\n          setError(error)\n          return Promise.reject(error)\n        },\n      )\n    },\n    [safeSetState, setData, setError],\n  )\n\n  return {\n    // using the same names that react-query uses for convenience\n    isIdle: status === 'idle',\n    isLoading: status === 'pending',\n    isError: status === 'rejected',\n    isSuccess: status === 'resolved',\n\n    setData,\n    setError,\n    error,\n    status,\n    data,\n    run,\n    reset,\n  }\n}\n\nexport {useAsync}\n","import * as React from 'react'\nimport {axiosClient} from 'utils/api-client'\n\nlet queue = []\n\nsetInterval(sendProfileQueue, 5000)\n\nfunction sendProfileQueue() {\n  if (!queue.length) {\n    return Promise.resolve({success: true})\n  }\n  const queueToSend = [...queue]\n  queue = []\n  return axiosClient.post('profile', queueToSend);\n};\n\n// By wrapping the Profile like this, we can set the onRender to whatever\n// we want and we get the additional benefit of being able to include\n// additional data and filter phases\nfunction Profiler({metadata, phases, ...props}) {\n  function reportProfile(\n    id, // the \"id\" prop of the Profiler tree that has just committed\n    phase, // either \"mount\" (if the tree just mounted) or \"update\" (if it re-rendered)\n    actualDuration, // time spent rendering the committed update\n    baseDuration, // estimated time to render the entire subtree without memoization\n    startTime, // when React began rendering this update\n    commitTime, // when React committed this update\n    interactions, // the Set of interactions belonging to this update\n  ) {\n    if (!phases || phases.includes(phase)) {\n      queue.push({\n        metadata,\n        id,\n        phase,\n        actualDuration,\n        baseDuration,\n        startTime,\n        commitTime,\n        interactions,\n      })\n    }\n  }\n  return <React.Profiler onRender={reportProfile} {...props} />\n}\n\nexport {Profiler}\n","export const large = '@media (min-width: 1200px)'\nexport const medium = '@media (min-width: 992px) and (max-width: 1199px)'\nexport const small = '@media (max-width: 991px)'\n","export default __webpack_public_path__ + \"static/media/book-placeholder.0a37bda0.svg\";"],"sourceRoot":""}