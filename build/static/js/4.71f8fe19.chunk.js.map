{"version":3,"sources":["../node_modules/debounce-fn/index.js","../node_modules/debounce-fn/node_modules/mimic-fn/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty.js","../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../../src/index.tsx","components/status-buttons.js","components/rating.js","components/book-row.js","components/list-item-list.js","screens/reading-list.js","screens/finished.js","screens/discover.js","utils/misc.js","context/auth-context.js","utils/books.js","utils/list-items.js","screens/book.js","screens/not-found.js","authenticated-app.js"],"names":["mimicFn","require","module","exports","inputFunction","options","TypeError","timeout","result","wait","before","after","Error","debouncedFunction","arguments_","context","this","later","undefined","apply","shouldCallNow","clearTimeout","setTimeout","cancel","copyProperty","to","from","property","ignoreNonConfigurable","toDescriptor","Object","getOwnPropertyDescriptor","fromDescriptor","canCopyProperty","defineProperty","configurable","writable","enumerable","value","changePrototype","fromPrototype","getPrototypeOf","setPrototypeOf","wrappedToString","withName","fromBody","toStringDescriptor","Function","prototype","toStringName","toString","changeToString","name","trim","newToString","bind","Reflect","ownKeys","unsupportedIterableToArray","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","length","i","F","s","n","done","e","_e","f","err","normalCompletion","didErr","step","next","_e2","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","push","_objectSpread2","target","arguments","source","forEach","key","getOwnPropertyDescriptors","defineProperties","_defineProperty","obj","_setPrototypeOf","p","subClass","superClass","changedArray","a","b","initialState","error","ErrorBoundary","state","updatedWithError","resetErrorBoundary","args","getDerivedStateFromError","reset","componentDidCatch","componentDidMount","componentDidUpdate","resetKeys","prevProps","render","fallbackRender","FallbackComponent","fallback","props","React","Component","Wrapped","setError","givenError","TooltipButton","label","highlight","onClick","icon","rest","useAsync","isLoading","isError","run","message","css","backgroundColor","color","colors","disabled","handleClick","aria-label","StatusButtons","book","dispatch","useDispatch","listItem","useListItem","id","handleUpdateClick","useCallback","updates","updateListItem","handleRemoveClick","item","removeListItem","handleAddClick","bookId","addListItem","Fragment","Boolean","finishDate","Date","now","visuallyHiddenCSS","border","clip","height","margin","overflow","padding","position","width","Rating","useState","isTabbing","setIsTabbing","useEffect","handleKeyDown","event","document","addEventListener","once","removeEventListener","rootClassName","stars","map","x","ratingId","ratingValue","type","checked","rating","onChange","outline","htmlFor","cursor","stopPropagation","className","display","alignItems","BookRow","title","author","coverImageUrl","justifyContent","aria-labelledby","minHeight","flexGrow","gridTemplateColumns","gridGap","borderRadius","textDecoration","boxShadow","mq","src","alt","maxHeight","flex","fontSize","marginLeft","marginTop","fontStyle","publisher","whiteSpace","synopsis","substring","right","flexDirection","ListItemList","filterListItems","noListItems","noFilteredListItems","useListItemsState","listItems","filteredListItems","useMemo","getListItems","textAlign","metadata","listItemCount","NoListItems","NoFilteredListItems","ReadingListScreen","li","FinishedScreen","DiscoverBooksScreen","query","setQuery","queried","setQueried","useBooksState","books","data","errMessage","isSuccess","getBooks","onSubmit","handleSearchClick","preventDefault","elements","search","placeholder","background","bookCount","formatDate","date","Intl","DateTimeFormat","month","year","format","AuthContext","createContext","useClient","user","useAuthenticationState","token","endpoint","config","client","displayName","loadingBook","bookPlaceholderSvg","bookQueryConfig","v","index","staleTime","cacheTime","setQueryDataForBook","queryCache","setQueryData","useListItems","useQuery","queryKey","queryFn","then","onSuccess","BookScreen","useParams","useCurrentBook","getBook","listItemId","marginBottom","maxWidth","marginRight","ListItemTimeframe","NotesTextarea","timeframeLabel","startDate","isUpdating","mutate","debouncedMutate","debounceFn","fontWeight","defaultValue","notes","handleNotesChange","NotFoundScreen","ErrorFallback","NavLink","match","useMatch","borderLeft","Nav","top","listStyle","AppRoutes","path","element","AuthenticatedApp","FullPageErrorFallback","username","variant","logout","gridTemplateRows"],"mappings":"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","file":"static/js/4.71f8fe19.chunk.js","sourcesContent":["'use strict';\nconst mimicFn = require('mimic-fn');\n\nmodule.exports = (inputFunction, options = {}) => {\n\tif (typeof inputFunction !== 'function') {\n\t\tthrow new TypeError(`Expected the first argument to be a function, got \\`${typeof inputFunction}\\``);\n\t}\n\n\tconst {\n\t\twait = 0,\n\t\tbefore = false,\n\t\tafter = true\n\t} = options;\n\n\tif (!before && !after) {\n\t\tthrow new Error('Both `before` and `after` are false, function wouldn\\'t be called.');\n\t}\n\n\tlet timeout;\n\tlet result;\n\n\tconst debouncedFunction = function (...arguments_) {\n\t\tconst context = this;\n\n\t\tconst later = () => {\n\t\t\ttimeout = undefined;\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst shouldCallNow = before && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (shouldCallNow) {\n\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tmimicFn(debouncedFunction, inputFunction);\n\n\tdebouncedFunction.cancel = () => {\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = undefined;\n\t\t}\n\t};\n\n\treturn debouncedFunction;\n};\n","'use strict';\n\nconst copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\t// `Function#arguments` and `Function#caller` should not be copied. They were reported to be present in `Reflect.ownKeys` for some devices in React Native (#41), so we explicitly ignore them here.\n\tif (property === 'arguments' || property === 'caller') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n//  - one its descriptors is changed\n//  - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable &&\n\t\ttoDescriptor.enumerable === fromDescriptor.enumerable &&\n\t\ttoDescriptor.configurable === fromDescriptor.configurable &&\n\t\t(toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tObject.defineProperty(to, 'toString', {...toStringDescriptor, value: newToString});\n};\n\nconst mimicFn = (to, from, {ignoreNonConfigurable = false} = {}) => {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n};\n\nmodule.exports = mimicFn;\n","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nmodule.exports = _createForOfIteratorHelper;","var defineProperty = require(\"./defineProperty\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread2;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import * as React from 'react'\n\nconst changedArray = (a: Array<unknown> = [], b: Array<unknown> = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\ninterface FallbackProps {\n  error: Error\n  resetErrorBoundary: (...args: Array<unknown>) => void\n}\n\ninterface ErrorBoundaryPropsWithComponent {\n  onResetKeysChange?: (\n    prevResetKeys: Array<unknown> | undefined,\n    resetKeys: Array<unknown> | undefined,\n  ) => void\n  onReset?: (...args: Array<unknown>) => void\n  onError?: (error: Error, info: {componentStack: string}) => void\n  resetKeys?: Array<unknown>\n  fallback?: never\n  FallbackComponent: React.ComponentType<FallbackProps>\n  fallbackRender?: never\n}\n\ndeclare function FallbackRender(\n  props: FallbackProps,\n): React.ReactElement<\n  unknown,\n  string | React.FunctionComponent | typeof React.Component\n> | null\n\ninterface ErrorBoundaryPropsWithRender {\n  onResetKeysChange?: (\n    prevResetKeys: Array<unknown> | undefined,\n    resetKeys: Array<unknown> | undefined,\n  ) => void\n  onReset?: (...args: Array<unknown>) => void\n  onError?: (error: Error, info: {componentStack: string}) => void\n  resetKeys?: Array<unknown>\n  fallback?: never\n  FallbackComponent?: never\n  fallbackRender: typeof FallbackRender\n}\n\ninterface ErrorBoundaryPropsWithFallback {\n  onResetKeysChange?: (\n    prevResetKeys: Array<unknown> | undefined,\n    resetKeys: Array<unknown> | undefined,\n  ) => void\n  onReset?: (...args: Array<unknown>) => void\n  onError?: (error: Error, info: {componentStack: string}) => void\n  resetKeys?: Array<unknown>\n  fallback: React.ReactElement<\n    unknown,\n    string | React.FunctionComponent | typeof React.Component\n  > | null\n  FallbackComponent?: never\n  fallbackRender?: never\n}\n\ntype ErrorBoundaryProps =\n  | ErrorBoundaryPropsWithFallback\n  | ErrorBoundaryPropsWithComponent\n  | ErrorBoundaryPropsWithRender\n\ntype ErrorBoundaryState = {error: Error | null}\n\nconst initialState: ErrorBoundaryState = {error: null}\n\nclass ErrorBoundary extends React.Component<\n  React.PropsWithRef<React.PropsWithChildren<ErrorBoundaryProps>>,\n  ErrorBoundaryState\n> {\n  static getDerivedStateFromError(error: Error) {\n    return {error}\n  }\n\n  state = initialState\n  updatedWithError = false\n  resetErrorBoundary = (...args: Array<unknown>) => {\n    this.props.onReset?.(...args)\n    this.reset()\n  }\n\n  reset() {\n    this.updatedWithError = false\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error: Error, info: React.ErrorInfo) {\n    this.props.onError?.(error, info)\n  }\n\n  componentDidMount() {\n    const {error} = this.state\n\n    if (error !== null) {\n      this.updatedWithError = true\n    }\n  }\n\n  componentDidUpdate(prevProps: ErrorBoundaryProps) {\n    const {error} = this.state\n    const {resetKeys} = this.props\n\n    // There's an edge case where if the thing that triggered the error\n    // happens to *also* be in the resetKeys array, we'd end up resetting\n    // the error boundary immediately. This would likely trigger a second\n    // error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call\n    // of cDU after the error is set\n    if (error !== null && !this.updatedWithError) {\n      this.updatedWithError = true\n      return\n    }\n\n    if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.reset()\n    }\n  }\n\n  render() {\n    const {error} = this.state\n\n    const {fallbackRender, FallbackComponent, fallback} = this.props\n\n    if (error !== null) {\n      const props = {\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop',\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary<P>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps: ErrorBoundaryProps,\n): React.ComponentType<P> {\n  const Wrapped: React.ComponentType<P> = props => {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler(givenError?: unknown): (error: unknown) => void {\n  const [error, setError] = React.useState<unknown>(null)\n  if (givenError != null) throw givenError\n  if (error != null) throw error\n  return setError\n}\n\nexport {ErrorBoundary, withErrorBoundary, useErrorHandler}\nexport type {\n  FallbackProps,\n  ErrorBoundaryPropsWithComponent,\n  ErrorBoundaryPropsWithRender,\n  ErrorBoundaryPropsWithFallback,\n  ErrorBoundaryProps,\n}\n\n/*\neslint\n  @typescript-eslint/no-throw-literal: \"off\",\n  @typescript-eslint/prefer-nullish-coalescing: \"off\"\n*/\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport React, { useCallback } from 'react'\nimport {\n  FaCheckCircle,\n  FaPlusCircle,\n  FaMinusCircle,\n  FaBook,\n  FaTimesCircle,\n} from 'react-icons/fa'\nimport Tooltip from '@reach/tooltip'\nimport * as colors from 'styles/colors'\nimport {useAsync} from 'utils/hooks'\nimport {CircleButton, Spinner} from './lib'\nimport { useListItem } from 'store/selectors'\nimport { useDispatch } from 'react-redux'\nimport { addListItem, removeListItem, updateListItem } from 'store/actions'\n\nfunction TooltipButton({ label, highlight, onClick, icon, ...rest }) {\n  const {isLoading, isError, error, run, reset} = useAsync();\n\n  function handleClick() {\n    if (isError) {\n      reset()\n    } else {\n      run(onClick())\n    }\n  }\n\n  return (\n    <Tooltip label={isError ? error.message : label}>\n      <CircleButton\n        css={{\n          backgroundColor: 'white',\n          ':hover,:focus': {\n            color: isLoading\n              ? colors.gray80\n              : isError\n              ? colors.danger\n              : highlight,\n          },\n        }}\n        disabled={isLoading}\n        onClick={handleClick}\n        aria-label={isError ? error.message : label}\n        {...rest}\n      >\n        {isLoading ? <Spinner /> : isError ? <FaTimesCircle /> : icon}\n      </CircleButton>\n    </Tooltip>\n  );\n}\n\nfunction StatusButtons({ book }) {\n  const dispatch = useDispatch();\n  const listItem = useListItem(book.id);\n\n  const handleUpdateClick = useCallback((updates) => dispatch(updateListItem(updates)), [dispatch]);\n\n  const handleRemoveClick = useCallback((item) => dispatch(removeListItem(item)), [dispatch]);\n\n  const handleAddClick = useCallback(({ bookId }) => dispatch(addListItem(bookId)), [dispatch]);\n\n  return (\n    <React.Fragment>\n      {listItem ? (\n        Boolean(listItem.finishDate) ? (\n          <TooltipButton\n            label=\"Mark as unread\"\n            highlight={colors.yellow}\n            onClick={() => handleUpdateClick({id: listItem.id, finishDate: null})}\n            icon={<FaBook />}\n          />\n        ) : (\n          <TooltipButton\n            label=\"Mark as read\"\n            highlight={colors.green}\n            onClick={() => handleUpdateClick({id: listItem.id, finishDate: Date.now()})}\n            icon={<FaCheckCircle />}\n          />\n        )\n      ) : null}\n      {listItem ? (\n        <TooltipButton\n          label=\"Remove from list\"\n          highlight={colors.danger}\n          onClick={() => handleRemoveClick({id: listItem.id})}\n          icon={<FaMinusCircle />}\n        />\n      ) : (\n        <TooltipButton\n          label=\"Add to list\"\n          highlight={colors.indigo}\n          onClick={() => handleAddClick({bookId: book.id})}\n          icon={<FaPlusCircle />}\n        />\n      )}\n    </React.Fragment>\n  );\n}\n\nexport { StatusButtons };\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport { useState, useEffect, Fragment, useCallback } from 'react'\nimport {FaStar} from 'react-icons/fa'\nimport * as colors from 'styles/colors'\nimport { useDispatch } from 'react-redux'\nimport { updateListItem } from 'store/actions'\nimport { useAsync } from 'utils/hooks'\n\nconst visuallyHiddenCSS = {\n  border: '0',\n  clip: 'rect(0 0 0 0)',\n  height: '1px',\n  margin: '-1px',\n  overflow: 'hidden',\n  padding: '0',\n  position: 'absolute',\n  width: '1px',\n};\n\nfunction Rating({ listItem }) {\n  const dispatch = useDispatch();\n  const { run } = useAsync();\n  const [isTabbing, setIsTabbing] = useState(false);\n\n  const handleUpdateClick = useCallback((updates) => run(dispatch(updateListItem(updates))), [dispatch, run]);\n\n  useEffect(() => {\n    function handleKeyDown(event) {\n      if (event.key === 'Tab') {\n        setIsTabbing(true);\n      }\n    }\n    document.addEventListener('keydown', handleKeyDown, {once: true});\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  const rootClassName = `list-item-${listItem.id}`;\n\n  const stars = Array.from({length: 5}).map((x, i) => {\n    const ratingId = `rating-${listItem.id}-${i}`;\n    const ratingValue = i + 1;\n\n    return (\n      <Fragment key={i}>\n        <input\n          name={rootClassName}\n          type=\"radio\"\n          id={ratingId}\n          value={ratingValue}\n          checked={ratingValue === listItem.rating}\n          onChange={() => {\n            handleUpdateClick({id: listItem.id, rating: ratingValue})\n          }}\n          css={[\n            visuallyHiddenCSS,\n            {\n              [`.${rootClassName} &:checked ~ label`]: {color: colors.gray20},\n              [`.${rootClassName} &:checked + label`]: {color: colors.orange},\n              // !important is here because we're doing special non-css-in-js things\n              // and so we have to deal with specificity and cascade. But, I promise\n              // this is better than trying to make this work with JavaScript.\n              // So deal with it 😎\n              [`.${rootClassName} &:hover ~ label`]: {\n                color: `${colors.gray20} !important`,\n              },\n              [`.${rootClassName} &:hover + label`]: {\n                color: 'orange !important',\n              },\n              [`.${rootClassName} &:focus + label svg`]: {\n                outline: isTabbing\n                  ? ['1px solid orange', '-webkit-focus-ring-color auto 5px']\n                  : 'initial',\n              },\n            },\n          ]}\n        />\n        <label\n          htmlFor={ratingId}\n          css={{\n            cursor: 'pointer',\n            color: listItem.rating < 0 ? colors.gray20 : colors.orange,\n            margin: 0,\n          }}\n        >\n          <span css={visuallyHiddenCSS}>\n            {ratingValue} {ratingValue === 1 ? 'star' : 'stars'}\n          </span>\n          <FaStar css={{width: '16px', margin: '0 2px'}} />\n        </label>\n      </Fragment>\n    );\n  });\n\n  return (\n    <div\n      onClick={e => e.stopPropagation()}\n      className={rootClassName}\n      css={{\n        display: 'inline-flex',\n        alignItems: 'center',\n        [`&.${rootClassName}:hover input + label`]: {\n          color: colors.orange,\n        },\n      }}\n    >\n      <span css={{display: 'flex'}}>{stars}</span>\n    </div>\n  );\n}\n\nexport { Rating };\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport {Link} from 'react-router-dom'\nimport * as mq from 'styles/media-queries'\nimport * as colors from 'styles/colors'\nimport {StatusButtons} from './status-buttons'\nimport {Rating} from './rating'\nimport { useListItem } from 'store/selectors'\n\nfunction BookRow({ book }) {\n  const { title, author, coverImageUrl } = book;\n  const listItem = useListItem(book.id);\n\n  const id = `book-row-book-${book.id}`;\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        position: 'relative',\n      }}\n    >\n      <Link\n        aria-labelledby={id}\n        to={`/book/${book.id}`}\n        css={{\n          minHeight: 270,\n          flexGrow: 2,\n          display: 'grid',\n          gridTemplateColumns: '140px 1fr',\n          gridGap: 20,\n          border: `1px solid ${colors.gray20}`,\n          color: colors.text,\n          padding: '1.25em',\n          borderRadius: '3px',\n          ':hover,:focus': {\n            textDecoration: 'none',\n            boxShadow: '0 5px 15px -5px rgba(0,0,0,.08)',\n            color: 'inherit',\n          },\n        }}\n      >\n        <div\n          css={{\n            width: 140,\n            [mq.small]: {\n              width: 100,\n            },\n          }}\n        >\n          <img\n            src={coverImageUrl}\n            alt={`${title} book cover`}\n            css={{maxHeight: '100%', width: '100%'}}\n          />\n        </div>\n        <div css={{flex: 1}}>\n          <div css={{display: 'flex', justifyContent: 'space-between'}}>\n            <div css={{flex: 1}}>\n              <h2\n                id={id}\n                css={{\n                  fontSize: '1.25em',\n                  margin: '0',\n                  color: colors.indigo,\n                }}\n              >\n                {title}\n              </h2>\n              {listItem?.finishDate ? <Rating listItem={listItem} /> : null}\n            </div>\n            <div css={{marginLeft: 10}}>\n              <div\n                css={{\n                  marginTop: '0.4em',\n                  fontStyle: 'italic',\n                  fontSize: '0.85em',\n                }}\n              >\n                {author}\n              </div>\n              <small>{book.publisher}</small>\n            </div>\n          </div>\n          <small css={{whiteSpace: 'break-spaces', display: 'block'}}>\n            {book.synopsis.substring(0, 500)}...\n          </small>\n        </div>\n      </Link>\n      <div\n        css={{\n          marginLeft: '20px',\n          position: 'absolute',\n          right: -20,\n          color: colors.gray80,\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'space-around',\n          height: '100%',\n        }}\n      >\n        <StatusButtons book={book} />\n      </div>\n    </div>\n  );\n};\n\nexport { BookRow };\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport { useEffect, useMemo } from 'react';\nimport {BookListUL, Spinner} from './lib'\nimport {BookRow} from './book-row'\nimport {Profiler} from './profiler'\nimport { useListItemsState } from 'store/selectors'\nimport { getListItems } from 'store/actions';\nimport { useDispatch } from 'react-redux';\n\nfunction ListItemList({ filterListItems, noListItems, noFilteredListItems }) {\n  const dispatch = useDispatch();\n  const { listItems, isLoading } = useListItemsState();\n\n  const filteredListItems = useMemo(() => listItems.filter(filterListItems), [filterListItems, listItems]);\n\n  useEffect(() => {\n    dispatch(getListItems());\n  }, [dispatch]);\n\n  if (isLoading) {\n    return (\n      <div css={{width: '100%', margin: 'auto', textAlign: 'center'}}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (!listItems.length) {\n    return (\n      <div css={{marginTop: '1em', fontSize: '1.2em'}}>{noListItems}</div>\n    );\n  };\n\n  if (!filteredListItems.length) {\n    return (\n      <div css={{marginTop: '1em', fontSize: '1.2em'}}>\n        {noFilteredListItems}\n      </div>\n    )\n  }\n\n  return (\n    <Profiler\n      id=\"List Item List\"\n      metadata={{listItemCount: filteredListItems.length}}\n    >\n      <BookListUL>\n        {filteredListItems.map(listItem => (\n          <li key={listItem.id} aria-label={listItem.book.title}>\n            <BookRow book={listItem.book} />\n          </li>\n        ))}\n      </BookListUL>\n    </Profiler>\n  )\n}\n\nexport {ListItemList}\n","import * as React from 'react'\nimport {Link} from 'components/lib'\nimport {ListItemList} from 'components/list-item-list'\n\nconst NoListItems = () => (\n  <p>\n    Hey there! Welcome to your bookshelf reading list. Get started by\n    heading over to <Link to=\"/discover\">the Discover page</Link> to add\n    books to your list.\n  </p>\n);\n\nconst NoFilteredListItems = () => (\n  <p>\n    Looks like you've finished all your books! Check them out in your{' '}\n    <Link to=\"/finished\">finished books</Link> or{' '}\n    <Link to=\"/discover\">discover more</Link>.\n  </p>\n);\n\nfunction ReadingListScreen() {\n  return (\n    <ListItemList\n      filterListItems={li => !li.finishDate}\n      noListItems={<NoListItems />}\n      noFilteredListItems={<NoFilteredListItems />}\n    />\n  )\n}\n\nexport {ReadingListScreen}\n","import * as React from 'react'\nimport {Link} from 'components/lib'\nimport {ListItemList} from 'components/list-item-list'\n\nconst NoListItems = () => (\n  <p>\n    Hey there! This is where books will go when you've finished reading\n    them. Get started by heading over to{' '}\n    <Link to=\"/discover\">the Discover page</Link> to add books to your\n    list.\n  </p>\n);\n\nconst NoFilteredListItems = () => (\n  <p>\n    Looks like you've got some reading to do! Check them out in your{' '}\n    <Link to=\"/list\">reading list</Link> or{' '}\n    <Link to=\"/discover\">discover more</Link>.\n  </p>\n);\n\nfunction FinishedScreen() {\n  return (\n    <ListItemList\n      filterListItems={li => Boolean(li.finishDate)}\n      noListItems={<NoListItems />}\n      noFilteredListItems={<NoFilteredListItems />}\n    />\n  )\n}\n\nexport {FinishedScreen}\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport { useEffect, useState } from 'react'\nimport Tooltip from '@reach/tooltip'\nimport {FaSearch, FaTimes} from 'react-icons/fa'\nimport * as colors from 'styles/colors'\nimport {BookRow} from 'components/book-row'\nimport {BookListUL, Spinner, Input} from 'components/lib'\nimport {Profiler} from 'components/profiler'\nimport { useBooksState } from 'store/selectors'\nimport { getBooks } from 'store/actions'\nimport { useDispatch } from 'react-redux'\n\nfunction DiscoverBooksScreen() {\n  const dispatch = useDispatch();\n  const [query, setQuery] = useState('');\n  const [queried, setQueried] = useState();\n  const { data: books, isLoading, errMessage } = useBooksState();\n  \n  const isSuccess = !isLoading && books !== undefined;\n  const isError = !!errMessage;\n\n  useEffect(() => {\n    dispatch(getBooks(query));\n  }, [dispatch, query]);\n\n  function handleSearchClick(event) {\n    event.preventDefault()\n    setQueried(true)\n    setQuery(event.target.elements.search.value)\n  }\n\n  return (\n    <div>\n      <div>\n        <form onSubmit={handleSearchClick}>\n          <Input\n            placeholder=\"Search books...\"\n            id=\"search\"\n            type=\"search\"\n            css={{width: '100%'}}\n          />\n          <Tooltip label=\"Search Books\">\n            <label htmlFor=\"search\">\n              <button\n                type=\"submit\"\n                css={{\n                  border: '0',\n                  position: 'relative',\n                  marginLeft: '-35px',\n                  background: 'transparent',\n                }}\n              >\n                {isLoading ? (\n                  <Spinner />\n                ) : isError ? (\n                  <FaTimes aria-label=\"error\" css={{color: colors.danger}} />\n                ) : (\n                  <FaSearch aria-label=\"search\" />\n                )}\n              </button>\n            </label>\n          </Tooltip>\n        </form>\n\n        {isError ? (\n          <div css={{color: colors.danger}}>\n            <p>There was an error:</p>\n            <pre>{errMessage}</pre>\n          </div>\n        ) : null}\n      </div>\n      <div>\n        {queried ? null : (\n          <div css={{marginTop: 20, fontSize: '1.2em', textAlign: 'center'}}>\n            <p>Welcome to the discover page.</p>\n            <p>Here, let me load a few books for you...</p>\n            {isLoading ? (\n              <div css={{width: '100%', margin: 'auto'}}>\n                <Spinner />\n              </div>\n            ) : isSuccess && books.length ? (\n              <p>Here you go! Find more books with the search bar above.</p>\n            ) : isSuccess && !books.length ? (\n              <p>\n                Hmmm... I couldn't find any books to suggest for you. Sorry.\n              </p>\n            ) : null}\n          </div>\n        )}\n        {books?.length ? (\n          <Profiler\n            id=\"Discover Books Screen Book List\"\n            metadata={{query, bookCount: books.length}}\n          >\n            <BookListUL css={{marginTop: 20}}>\n              {books.map(book => (\n                <li key={book.id} aria-label={book.title}>\n                  <BookRow key={book.id} book={book} />\n                </li>\n              ))}\n            </BookListUL>\n          </Profiler>\n        ) : queried ? (\n          <div css={{marginTop: 20, fontSize: '1.2em', textAlign: 'center'}}>\n            {isLoading ? (\n              <div css={{width: '100%', margin: 'auto'}}>\n                <Spinner />\n              </div>\n            ) : (\n              <p>\n                Hmmm... I couldn't find any books with the query \"{query}.\"\n                Please try another.\n              </p>\n            )}\n          </div>\n        ) : null}\n      </div>\n    </div>\n  )\n}\n\nexport {DiscoverBooksScreen}\n","const formatDate = date =>\n  new Intl.DateTimeFormat('en-US', {month: 'short', year: '2-digit'}).format(\n    date,\n  )\n\nexport {formatDate}\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport React, { useMemo } from 'react'\nimport {queryCache} from 'react-query'\nimport * as auth from 'auth-provider'\nimport {client} from 'utils/api-client'\nimport {useAsync} from 'utils/hooks'\nimport {setQueryDataForBook} from 'utils/books'\nimport {FullPageSpinner, FullPageErrorFallback} from 'components/lib'\nimport { useAuthenticationState } from 'store/selectors'\n\nasync function bootstrapAppData() {\n  let user = null\n\n  const token = await auth.getToken()\n  if (token) {\n    const data = await client('bootstrap', {token})\n    queryCache.setQueryData('list-items', data.listItems, {\n      staleTime: 5000,\n    })\n    for (const listItem of data.listItems) {\n      setQueryDataForBook(listItem.book)\n    }\n    user = data.user\n  }\n  return user\n}\n\nconst AuthContext = React.createContext()\nAuthContext.displayName = 'AuthContext'\n\nfunction AuthProvider(props) {\n  const {\n    data: user,\n    status,\n    error,\n    isLoading,\n    isIdle,\n    isError,\n    isSuccess,\n    run,\n    setData,\n  } = useAsync()\n\n  React.useEffect(() => {\n    const appDataPromise = bootstrapAppData()\n    run(appDataPromise)\n  }, [run]);\n\n  const login = React.useCallback(\n    form => auth.login(form).then(user => setData(user)),\n    [setData],\n  );\n\n  const register = React.useCallback(\n    form => auth.register(form).then(user => setData(user)),\n    [setData],\n  );\n\n  const logout = React.useCallback(() => {\n    auth.logout()\n    queryCache.clear()\n    setData(null)\n  }, [setData]);\n\n  const value = React.useMemo(\n    () => ({user, login, logout, register}),\n    [login, logout, register, user],\n  );\n\n  if (isLoading || isIdle) {\n    return <FullPageSpinner />\n  }\n\n  if (isError) {\n    return <FullPageErrorFallback error={error} />\n  }\n\n  if (isSuccess) {\n    return <AuthContext.Provider value={value} {...props} />\n  }\n\n  throw new Error(`Unhandled status: ${status}`)\n}\n\nfunction useAuth() {\n  const context = React.useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(`useAuth must be used within a AuthProvider`)\n  }\n  return context\n}\n\nfunction useClient() {\n  const {user} = useAuthenticationState();\n  const token = useMemo(() => user?.token, [user?.token]);\n\n  return React.useCallback(\n    (endpoint, config) => client(endpoint, {...config, token}),\n    [token],\n  )\n}\n\nexport {AuthProvider, useAuth, useClient}\n","import * as React from 'react'\nimport {useQuery, queryCache} from 'react-query'\nimport {useClient} from 'context/auth-context'\nimport bookPlaceholderSvg from 'assets/book-placeholder.svg'\n\nconst loadingBook = {\n  title: 'Loading...',\n  author: 'loading...',\n  coverImageUrl: bookPlaceholderSvg,\n  publisher: 'Loading Publishing',\n  synopsis: 'Loading...',\n  loadingBook: true,\n}\n\nconst loadingBooks = Array.from({length: 10}, (v, index) => ({\n  id: `loading-book-${index}`,\n  ...loadingBook,\n}))\n\nconst bookQueryConfig = {\n  staleTime: 1000 * 60 * 60,\n  cacheTime: 1000 * 60 * 60,\n}\n\nconst getBookSearchConfig = (client, query) => ({\n  queryKey: ['bookSearch', {query}],\n  queryFn: () =>\n    client(`books?query=${encodeURIComponent(query)}`).then(data => data.books),\n  config: {\n    onSuccess(books) {\n      for (const book of books) {\n        queryCache.setQueryData(\n          ['book', {bookId: book.id}],\n          book,\n          bookQueryConfig,\n        )\n      }\n    },\n  },\n})\n\nfunction useBookSearch(query) {\n  const client = useClient()\n  const result = useQuery(getBookSearchConfig(client, query))\n  return {...result, books: result.data ?? loadingBooks}\n}\n\nfunction useBook(bookId) {\n  const client = useClient()\n  const {data} = useQuery({\n    queryKey: ['book', {bookId}],\n    queryFn: () => client(`books/${bookId}`).then(data => data.book),\n    ...bookQueryConfig,\n  })\n  return data ?? loadingBook\n}\n\nfunction useRefetchBookSearchQuery() {\n  const client = useClient()\n  return React.useCallback(\n    async function refetchBookSearchQuery() {\n      queryCache.removeQueries('bookSearch')\n      await queryCache.prefetchQuery(getBookSearchConfig(client, ''))\n    },\n    [client],\n  )\n}\n\nfunction setQueryDataForBook(book) {\n  queryCache.setQueryData(['book', {bookId: book.id}], book, bookQueryConfig)\n}\n\nexport {useBook, useBookSearch, useRefetchBookSearchQuery, setQueryDataForBook}\n","import {useQuery, useMutation, queryCache} from 'react-query'\nimport {setQueryDataForBook} from './books'\nimport {useClient} from 'context/auth-context'\n\nfunction useListItem(bookId, options) {\n  const listItems = useListItems(options)\n  return listItems?.find(li => li.bookId === bookId) ?? null\n}\n\nfunction useListItems(options = {}) {\n  const client = useClient()\n\n  const {data: listItems} = useQuery({\n    queryKey: 'list-items',\n    queryFn: () => client('list-items').then(data => data.listItems),\n    ...options,\n    config: {\n      ...options.config,\n      onSuccess: async listItems => {\n        await options.config?.onSuccess?.(listItems)\n        for (const listItem of listItems) {\n          setQueryDataForBook(listItem.book)\n        }\n      },\n    },\n  });\n\n  return listItems ?? []\n}\n\nconst defaultMutationOptions = {\n  onError: (err, variables, recover) =>\n    typeof recover === 'function' ? recover() : null,\n  onSettled: () => queryCache.invalidateQueries('list-items'),\n}\n\nfunction onUpdateMutation(newItem) {\n  const previousItems = queryCache.getQueryData('list-items')\n\n  queryCache.setQueryData('list-items', old => {\n    return old.map(item => {\n      return item.id === newItem.id ? {...item, ...newItem} : item\n    })\n  })\n\n  return () => queryCache.setQueryData('list-items', previousItems)\n}\n\nfunction useUpdateListItem(options) {\n  const client = useClient()\n\n  return useMutation(\n    updates =>\n      client(`list-items/${updates.id}`, {\n        method: 'PUT',\n        data: updates,\n      }),\n    {\n      onMutate: onUpdateMutation,\n      ...defaultMutationOptions,\n      ...options,\n    },\n  )\n}\n\nfunction useRemoveListItem(options) {\n  const client = useClient()\n\n  return useMutation(({id}) => client(`list-items/${id}`, {method: 'DELETE'}), {\n    onMutate: removedItem => {\n      const previousItems = queryCache.getQueryData('list-items')\n\n      queryCache.setQueryData('list-items', old => {\n        return old.filter(item => item.id !== removedItem.id)\n      })\n\n      return () => queryCache.setQueryData('list-items', previousItems)\n    },\n    ...defaultMutationOptions,\n    ...options,\n  })\n}\n\nfunction useCreateListItem(options) {\n  const client = useClient()\n\n  return useMutation(({bookId}) => client('list-items', {data: {bookId}}), {\n    ...defaultMutationOptions,\n    ...options,\n  })\n}\n\nexport {\n  useListItem,\n  useListItems,\n  useUpdateListItem,\n  useRemoveListItem,\n  useCreateListItem,\n}\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport React, { useCallback, useEffect, useMemo } from 'react'\nimport debounceFn from 'debounce-fn'\nimport {FaRegCalendarAlt} from 'react-icons/fa'\nimport Tooltip from '@reach/tooltip'\nimport {useParams} from 'react-router-dom'\nimport {formatDate} from 'utils/misc'\nimport * as mq from 'styles/media-queries'\nimport * as colors from 'styles/colors'\nimport {Spinner, Textarea} from 'components/lib'\nimport {Rating} from 'components/rating'\nimport {Profiler} from 'components/profiler'\nimport {StatusButtons} from 'components/status-buttons'\nimport { useCurrentBook, useListItem } from 'store/selectors'\nimport { getBook, updateListItem } from 'store/actions'\nimport { useDispatch } from 'react-redux'\nimport { useListItems } from 'utils/list-items'\n\nfunction BookScreen() {\n  const { bookId } = useParams();\n  const dispatch = useDispatch();\n  const { data: book } = useCurrentBook();\n  const listItem = useListItem(bookId);\n\n  const {title, author, coverImageUrl, publisher, synopsis} = book;\n\n  useEffect(() => {\n    dispatch(getBook(bookId));\n  }, [bookId, dispatch]);\n\n  return (\n    <Profiler id=\"Book Screen\" metadata={{bookId, listItemId: listItem?.id}}>\n      <div>\n        <div\n          css={{\n            display: 'grid',\n            gridTemplateColumns: '1fr 2fr',\n            gridGap: '2em',\n            marginBottom: '1em',\n            [mq.small]: {\n              display: 'flex',\n              flexDirection: 'column',\n            },\n          }}\n        >\n          <img\n            src={coverImageUrl}\n            alt={`${title} book cover`}\n            css={{width: '100%', maxWidth: '14rem'}}\n          />\n          <div>\n            <div css={{display: 'flex', position: 'relative'}}>\n              <div css={{flex: 1, justifyContent: 'space-between'}}>\n                <h1>{title}</h1>\n                <div>\n                  <i>{author}</i>\n                  <span css={{marginRight: 6, marginLeft: 6}}>|</span>\n                  <i>{publisher}</i>\n                </div>\n              </div>\n              <div\n                css={{\n                  right: 0,\n                  color: colors.gray80,\n                  display: 'flex',\n                  flexDirection: 'column',\n                  justifyContent: 'space-around',\n                  minHeight: 100,\n                }}\n              >\n                {book.loadingBook ? null : <StatusButtons book={book} />}\n              </div>\n            </div>\n            <div css={{marginTop: 10, minHeight: 46}}>\n              {listItem?.finishDate ? <Rating listItem={listItem} /> : null}\n              {listItem ? <ListItemTimeframe listItem={listItem} /> : null}\n            </div>\n            <br />\n            <p css={{whiteSpace: 'break-spaces', display: 'block'}}>\n              {synopsis}\n            </p>\n          </div>\n        </div>\n        {!book.loadingBook && listItem ? (\n          <NotesTextarea listItem={listItem} />\n        ) : null}\n      </div>\n    </Profiler>\n  );\n}\n\nfunction ListItemTimeframe({listItem}) {\n  const timeframeLabel = listItem.finishDate\n    ? 'Start and finish date'\n    : 'Start date'\n\n  return (\n    <Tooltip label={timeframeLabel}>\n      <div aria-label={timeframeLabel} css={{marginTop: 6}}>\n        <FaRegCalendarAlt css={{marginTop: -2, marginRight: 5}} />\n        <span>\n          {formatDate(listItem.startDate)}{' '}\n          {listItem.finishDate ? `— ${formatDate(listItem.finishDate)}` : null}\n        </span>\n      </div>\n    </Tooltip>\n  )\n}\n\nfunction NotesTextarea({ listItem }) {\n  const dispatch = useDispatch();\n  const { isUpdating } = useListItems();\n  const mutate = useCallback((updates) => dispatch(updateListItem(updates)), [dispatch]);\n\n  const debouncedMutate = useMemo(\n    () => debounceFn(mutate, {wait: 300}),\n    [mutate],\n  );\n\n  function handleNotesChange(e) {\n    debouncedMutate({id: listItem.id, notes: e.target.value})\n  };\n\n  return (\n    <React.Fragment>\n      <div>\n        <label\n          htmlFor=\"notes\"\n          css={{\n            display: 'inline-block',\n            marginRight: 10,\n            marginTop: '0',\n            marginBottom: '0.5rem',\n            fontWeight: 'bold',\n          }}\n        >\n          Notes\n        </label>\n        {isUpdating ? <Spinner /> : null}\n      </div>\n      <Textarea\n        id=\"notes\"\n        defaultValue={listItem.notes}\n        onChange={handleNotesChange}\n        css={{width: '100%', minHeight: 300}}\n      />\n    </React.Fragment>\n  )\n}\n\nexport {BookScreen}\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport {Link} from 'components/lib'\n\nfunction NotFoundScreen() {\n  return (\n    <div\n      css={{\n        height: '100%',\n        display: 'grid',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <div>\n        Sorry... nothing here. <Link to=\"/list\">Go home</Link>\n      </div>\n    </div>\n  )\n}\n\nexport {NotFoundScreen}\n","/** @jsx jsx */\nimport {jsx} from '@emotion/core'\n\nimport {Routes, Route, Link as RouterLink, useMatch} from 'react-router-dom'\nimport {ErrorBoundary} from 'react-error-boundary'\nimport {Button, ErrorMessage, FullPageErrorFallback} from './components/lib'\nimport * as mq from './styles/media-queries'\nimport * as colors from './styles/colors'\nimport {ReadingListScreen} from './screens/reading-list'\nimport {FinishedScreen} from './screens/finished'\nimport {DiscoverBooksScreen} from './screens/discover'\nimport {BookScreen} from './screens/book'\nimport {NotFoundScreen} from './screens/not-found'\nimport { logout } from 'auth-provider';\nimport { useAuthenticationState } from 'store/selectors/index';\n\nfunction ErrorFallback({error}) {\n  return (\n    <ErrorMessage\n      error={error}\n      css={{\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    />\n  )\n}\n\nfunction AuthenticatedApp() {\n  const { user } = useAuthenticationState();\n\n  return (\n    <ErrorBoundary FallbackComponent={FullPageErrorFallback}>\n      <div\n        css={{\n          display: 'flex',\n          alignItems: 'center',\n          position: 'absolute',\n          top: '10px',\n          right: '10px',\n        }}\n      >\n        {user.username}\n        <Button variant=\"secondary\" css={{marginLeft: '10px'}} onClick={logout}>\n          Logout\n        </Button>\n      </div>\n      <div\n        css={{\n          margin: '0 auto',\n          padding: '4em 2em',\n          maxWidth: '840px',\n          width: '100%',\n          display: 'grid',\n          gridGap: '1em',\n          gridTemplateColumns: '1fr 3fr',\n          [mq.small]: {\n            gridTemplateColumns: '1fr',\n            gridTemplateRows: 'auto',\n            width: '100%',\n          },\n        }}\n      >\n        <div css={{position: 'relative'}}>\n          <Nav />\n        </div>\n        <main css={{width: '100%'}}>\n          <ErrorBoundary FallbackComponent={ErrorFallback}>\n            <AppRoutes />\n          </ErrorBoundary>\n        </main>\n      </div>\n    </ErrorBoundary>\n  )\n}\n\nfunction NavLink(props) {\n  const match = useMatch(props.to)\n  return (\n    <RouterLink\n      css={[\n        {\n          display: 'block',\n          padding: '8px 15px 8px 10px',\n          margin: '5px 0',\n          width: '100%',\n          height: '100%',\n          color: colors.text,\n          borderRadius: '2px',\n          borderLeft: '5px solid transparent',\n          ':hover': {\n            color: colors.indigo,\n            textDecoration: 'none',\n            background: colors.gray10,\n          },\n        },\n        match\n          ? {\n              borderLeft: `5px solid ${colors.indigo}`,\n              background: colors.gray10,\n              ':hover': {\n                background: colors.gray10,\n              },\n            }\n          : null,\n      ]}\n      {...props}\n    />\n  )\n}\n\nfunction Nav() {\n  return (\n    <nav\n      css={{\n        position: 'sticky',\n        top: '4px',\n        padding: '1em 1.5em',\n        border: `1px solid ${colors.gray10}`,\n        borderRadius: '3px',\n        [mq.small]: {\n          position: 'static',\n          top: 'auto',\n        },\n      }}\n    >\n      <ul\n        css={{\n          listStyle: 'none',\n          padding: '0',\n        }}\n      >\n        <li>\n          <NavLink to=\"/list\">Reading List</NavLink>\n        </li>\n        <li>\n          <NavLink to=\"/finished\">Finished Books</NavLink>\n        </li>\n        <li>\n          <NavLink to=\"/discover\">Discover</NavLink>\n        </li>\n      </ul>\n    </nav>\n  )\n}\n\nfunction AppRoutes() {\n  return (\n    <Routes>\n      <Route path=\"/list\" element={<ReadingListScreen />} />\n      <Route path=\"/finished\" element={<FinishedScreen />} />\n      <Route path=\"/discover\" element={<DiscoverBooksScreen />} />\n      <Route path=\"/book/:bookId\" element={<BookScreen />} />\n      <Route path=\"*\" element={<NotFoundScreen />} />\n    </Routes>\n  )\n}\n\nexport default AuthenticatedApp\n"],"sourceRoot":""}